"use strict";(self.webpackChunkentaingine_docs=self.webpackChunkentaingine_docs||[]).push([[4343],{2838:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var i=s(4848),t=s(8453);const l={title:"Self-Consistency",slug:"/prompting-techniques/self-consistency",sidebar_position:5,description:"Generate multiple solutions and select the most consistent answer."},r=void 0,o={id:"prompting-techniques/self-consistency",title:"Self-Consistency",description:"Generate multiple solutions and select the most consistent answer.",source:"@site/docs/prompting-techniques/self-consistency.mdx",sourceDirName:"prompting-techniques",slug:"/prompting-techniques/self-consistency",permalink:"/prompting-techniques/self-consistency",draft:!1,unlisted:!1,editUrl:"https://github.com/entAIngine/entaingine-docs/tree/main/docs/prompting-techniques/self-consistency.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"Self-Consistency",slug:"/prompting-techniques/self-consistency",sidebar_position:5,description:"Generate multiple solutions and select the most consistent answer."},sidebar:"tutorialSidebar",previous:{title:"Chain-of-Thought Prompting",permalink:"/prompting-techniques/chain-of-thought"},next:{title:"Generated Knowledge",permalink:"/prompting-techniques/generated-knowledge"}},a={},c=[{value:"Use When",id:"use-when",level:2},{value:"Pattern",id:"pattern",level:2},{value:"Examples",id:"examples",level:2},{value:"Example 1: Arithmetic Reasoning (from Wang et al., 2022)",id:"example-1-arithmetic-reasoning-from-wang-et-al-2022",level:3},{value:"Example 2: Sentiment Classification (new)",id:"example-2-sentiment-classification-new",level:3},{value:"Benefits",id:"benefits",level:2},{value:"Pitfalls",id:"pitfalls",level:2},{value:"Self-Consistency Process",id:"self-consistency-process",level:2},{value:"References",id:"references",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Self-Consistency is an advanced prompting technique designed to improve the reliability and accuracy of language model outputs, especially for complex reasoning tasks."}),"\n",(0,i.jsx)(n.admonition,{title:"Core Concept \ud83c\udfaf",type:"tip",children:(0,i.jsx)(n.p,{children:"Instead of relying on a single response, generate multiple answers and pick the most frequent one!"})}),"\n",(0,i.jsx)(n.p,{children:"Instead of relying on a single response, the model is prompted multiple times (often with different sampling seeds), and the most consistent answer among the outputs is selected as the final result."}),"\n",(0,i.jsxs)(n.p,{children:["This approach was introduced by ",(0,i.jsx)(n.a,{href:"https://arxiv.org/abs/2203.11171",children:"Wang et al. (2022)"})," to address the variability and occasional errors in chain-of-thought (CoT) reasoning, particularly for arithmetic and commonsense reasoning tasks."]}),"\n",(0,i.jsx)(n.h2,{id:"use-when",children:"Use When"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"The task is ambiguous or has multiple possible answers."}),"\n",(0,i.jsx)(n.li,{children:"You want to improve reliability by aggregating outputs."}),"\n",(0,i.jsx)(n.li,{children:"The model\u2019s responses vary significantly between runs."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"pattern",children:"Pattern"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Prompt the model with the same question multiple times (using temperature sampling or different seeds)."}),"\n",(0,i.jsx)(n.li,{children:"Collect all generated answers."}),"\n",(0,i.jsx)(n.li,{children:"Select the most frequent or consistent answer as the final output."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h3,{id:"example-1-arithmetic-reasoning-from-wang-et-al-2022",children:"Example 1: Arithmetic Reasoning (from Wang et al., 2022)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"Q: When I was 6 my sister was half my age. Now I\u2019m 70 how old is my sister?\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Model outputs (sampled multiple times):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"- When I was 6, my sister was 3. Now I am 70, so she is 70 - 3 = 67. The answer is 67.\n- When I was 6, my sister was half my age, so she was 3. Now that I am 70, she is 70 - 3 = 67. The answer is 67.\n- When I was 6, my sister was half my age, so she was 3. Now I am 70, so she is 70/2 = 35. The answer is 35.\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Final answer (by majority):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"67\n"})}),"\n",(0,i.jsx)(n.h3,{id:"example-2-sentiment-classification-new",children:"Example 2: Sentiment Classification (new)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:'Classify the sentiment of the following review: "The product exceeded my expectations."\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Model outputs (sampled multiple times):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"- Positive\n- Positive\n- Positive\n- Neutral\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.em,{children:"Final answer (by majority):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Positive\n"})}),"\n",(0,i.jsx)(n.h2,{id:"benefits",children:"Benefits"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Reliability:"})," Reduces the impact of random errors or outlier responses."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Accuracy:"})," Aggregates multiple reasoning paths to find the most likely answer."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Robustness:"})," Especially useful for tasks with inherent ambiguity or multiple valid solutions."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"pitfalls",children:"Pitfalls"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Increases computational cost (requires multiple model runs)."}),"\n",(0,i.jsx)(n.li,{children:"May not resolve ambiguity if the model is inconsistent or biased."}),"\n",(0,i.jsx)(n.li,{children:"Not always necessary for simple or deterministic tasks."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"self-consistency-process",children:"Self-Consistency Process"}),"\n",(0,i.jsx)(n.p,{children:"The following diagram illustrates how self-consistency works:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'Input Problem: "If a train travels 60 miles in 45 minutes, \n               what\'s its speed in mph?"\n\n                Multiple Sampling Paths\n                         \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502              \u2502     \u2502     \u2502              \u2502\n    \u25bc              \u25bc     \u25bc     \u25bc              \u25bc\nSample 1       Sample 2   \u2502  Sample 3     Sample 4\n                          \u2502\n"60 miles in    "45 min = \u2502  "Speed =     "Distance = 60\n45 min = 3/4    0.75 hr   \u2502  distance/    Time = 45 min\nhour. Speed =   Speed =   \u2502  time =       = 0.75 hr\n60 \xf7 0.75 =     60/0.75 = \u2502  60/0.75 =    Speed = 60/0.75\n80 mph"         80 mph"   \u2502  80 mph"      = 80 mph"\n    \u2502              \u2502     \u2502     \u2502              \u2502\n    \u25bc              \u25bc     \u25bc     \u25bc              \u25bc\n  80 mph         80 mph  \u2502   80 mph        80 mph\n                         \u2502\n                         \u25bc\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u2502  VOTE & SELECT  \u2502\n               \u2502                 \u2502\n               \u2502 80 mph: \u2588\u2588\u2588\u2588    \u2502 \u2190 Most frequent\n               \u2502 75 mph: \u2588       \u2502 \u2190 Outlier \n               \u2502 85 mph: \u2588       \u2502 \u2190 Outlier\n               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n                         \u25bc\n                 Final Answer: 80 mph\n'})}),"\n",(0,i.jsx)(n.p,{children:"This approach reduces errors by generating multiple reasoning paths and selecting the most consistent result."}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Wang, X., Wei, J., Schuurmans, D., Le, Q. V., Chi, E., Narang, S., ... & Zhou, D. (2022). ",(0,i.jsx)(n.a,{href:"https://arxiv.org/abs/2203.11171",children:"Self-Consistency Improves Chain of Thought Reasoning in Language Models"}),". ",(0,i.jsx)(n.em,{children:"arXiv:2203.11171"}),"."]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>o});var i=s(6540);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);